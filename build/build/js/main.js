"use strict";

var playBtn = document.querySelector('.sam__main-wheel-btn'),
    playBtnText = document.querySelector('.sam__main-wheel-btn span'),
    wheel = document.querySelector('.sam__main-wheel-reel'),
    tries = document.querySelector('.try-number'),
    triesFull = document.querySelector('.sam__main-left-try'),
    overlay = document.querySelector('.sam__overlay'),
    popupFirst = document.querySelector('.sam__firstWin'),
    popupFirstBtn = document.querySelector('.sam__firstWin-btn'),
    popupSecond = document.querySelector('.sam__secondWin'),
    popupSecondRules = document.querySelector('.sam__secondWin-rules'),
    rules = document.querySelector('.sam__rules'),
    footerRulesBtn = document.querySelector('.sam__footer-rules'),
    mobRulesBtn = document.querySelector('.sam__infoMob-txt-more'),
    overflow = document.querySelector('body'),
    popupClose = document.querySelector('.sam__rules-close'),
    video = document.querySelector('.sam__main-video'),
    wrapper = document.querySelector('.sam'),
    totalTriesCounter = 2;
var triesCounter = 0;
footerRulesBtn.addEventListener('click', function () {
  overlay.classList.remove('opacity-overlay');
  rules.classList.remove('hide');
});
mobRulesBtn.addEventListener('click', function () {
  overlay.classList.remove('opacity-overlay');
  rules.classList.remove('hide');
  overflow.style.overflow = 'hidden';
});
popupClose.addEventListener('click', function () {
  overlay.classList.add('opacity-overlay');
  rules.classList.add('hide');
  overflow.style.overflow = 'unset';
});
playBtn.addEventListener('click', function () {
  if (triesCounter === 0) {
    runFirstRotation();
  } else {
    runSecondRotation();
  }
});

function updTriesCounter() {
  var cnt = totalTriesCounter - triesCounter;

  if (cnt === 2) {
    tries.innerText = "2 спроби";
  } else if (cnt === 1) {
    tries.innerText = "1 спроба";
  } else {
    tries.innerText = "0 спроб";
  }
}

function runFirstRotation() {
  wheel.classList.add('reel-rotation-first');
  playBtn.classList.remove('pulse-btn');
  playBtnText.classList.add('hide');
  playBtn.style.transform = 'scale(0.7)';
  playBtn.style.cursor = 'default';
  wrapper.style.pointerEvents = 'none';
  setTimeout(function () {
    if (window.innerWidth <= 500) {
      triesFull.style.opacity = '0';
    }
  }, 700);
  setTimeout(function () {
    doAfterFirstRotation();
  }, 6000);
  triesCounter++;
  updTriesCounter();
}

function doAfterFirstRotation() {
  wheel.style.transform = 'rotate(992deg)';
  wheel.classList.remove('reel-rotation-first');
  displayPopup(popupFirst);
  wrapper.style.pointerEvents = 'auto';
  overflow.style.overflow = 'hidden';
  setTimeout(function () {
    playBtn.classList.add('pulse-btn');
    playBtnText.classList.remove('hide');
    playBtn.style.transform = 'scale(1)';
    playBtn.style.cursor = 'pointer';
  }, 1200);
}

function runSecondRotation() {
  wheel.classList.add('reel-rotation-second');
  playBtn.classList.remove('pulse-btn');
  playBtnText.classList.add('hide');
  playBtn.style.transform = 'scale(0.7)';
  playBtn.style.cursor = 'default';
  overflow.style.overflow = 'hidden';
  wrapper.style.pointerEvents = 'none';
  setTimeout(function () {
    doAfterSecondRotation();
  }, 6000);
  triesCounter++;
  updTriesCounter();
}

function doAfterSecondRotation() {
  displayPopup(popupSecond);
  wrapper.style.pointerEvents = 'auto';
  popupSecondRules.addEventListener('click', function () {
    popupSecond.classList.add('hide');
    rules.classList.add('popup-win');
    rules.classList.remove('hide');
  });
}

popupFirstBtn.addEventListener('click', function () {
  overlay.classList.add('opacity-overlay');
  popupFirst.classList.add('hide');
  overflow.style.overflow = 'unset';
});

function displayPopup(popup) {
  overlay.classList.remove('opacity-overlay');
  popup.classList.remove('hide');
}

if (window.innerWidth <= 768) {
  video.remove();
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsicGxheUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBsYXlCdG5UZXh0Iiwid2hlZWwiLCJ0cmllcyIsInRyaWVzRnVsbCIsIm92ZXJsYXkiLCJwb3B1cEZpcnN0IiwicG9wdXBGaXJzdEJ0biIsInBvcHVwU2Vjb25kIiwicG9wdXBTZWNvbmRSdWxlcyIsInJ1bGVzIiwiZm9vdGVyUnVsZXNCdG4iLCJtb2JSdWxlc0J0biIsIm92ZXJmbG93IiwicG9wdXBDbG9zZSIsInZpZGVvIiwid3JhcHBlciIsInRvdGFsVHJpZXNDb3VudGVyIiwidHJpZXNDb3VudGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwiYWRkIiwicnVuRmlyc3RSb3RhdGlvbiIsInJ1blNlY29uZFJvdGF0aW9uIiwidXBkVHJpZXNDb3VudGVyIiwiY250IiwiaW5uZXJUZXh0IiwidHJhbnNmb3JtIiwiY3Vyc29yIiwicG9pbnRlckV2ZW50cyIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwib3BhY2l0eSIsImRvQWZ0ZXJGaXJzdFJvdGF0aW9uIiwiZGlzcGxheVBvcHVwIiwiZG9BZnRlclNlY29uZFJvdGF0aW9uIiwicG9wdXAiXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBTUEsT0FBTyxHQUFHQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsc0JBQXZCLENBQWhCO0FBQUEsSUFDTUMsV0FBVyxHQUFHRixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsMkJBQXZCLENBRHBCO0FBQUEsSUFFTUUsS0FBSyxHQUFHSCxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsdUJBQXZCLENBRmQ7QUFBQSxJQUdNRyxLQUFLLEdBQUdKLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixhQUF2QixDQUhkO0FBQUEsSUFJTUksU0FBUyxHQUFHTCxRQUFRLENBQUNDLGFBQVQsQ0FBdUIscUJBQXZCLENBSmxC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QWpCLENBQWtDLE9BQWxDLEVBQTJDLFlBQU07QUFDN0NYLElBQUFBLFdBQVcsQ0FBQ1ksU0FBWixDQUFzQkcsR0FBdEIsQ0FBMEIsTUFBMUI7QUFDQWIsSUFBQUEsS0FBSyxDQUFDVSxTQUFOLENBQWdCRyxHQUFoQixDQUFvQixXQUFwQjtBQUNBYixJQUFBQSxLQUFLLENBQUNVLFNBQU4sQ0FBZ0JDLE1BQWhCLENBQXVCLE1BQXZCO0FBQ0gsR0FKRDtBQUtIOztBQUVEZCxhQUFhLENBQUNZLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDLFlBQU07QUFDMUNkLEVBQUFBLE9BQU8sQ0FBQ2UsU0FBUixDQUFrQkcsR0FBbEIsQ0FBc0IsaUJBQXRCO0FBQ0FqQixFQUFBQSxVQUFVLENBQUNjLFNBQVgsQ0FBcUJHLEdBQXJCLENBQXlCLE1BQXpCO0FBQ0FWLEVBQUFBLFFBQVEsQ0FBQ1MsS0FBVCxDQUFlVCxRQUFmLEdBQTBCLE9BQTFCO0FBQ0gsQ0FKRDs7QUFNQSxTQUFTd0IsWUFBVCxDQUFzQkUsS0FBdEIsRUFBNkI7QUFDekJsQyxFQUFBQSxPQUFPLENBQUNlLFNBQVIsQ0FBa0JDLE1BQWxCLENBQXlCLGlCQUF6QjtBQUNBa0IsRUFBQUEsS0FBSyxDQUFDbkIsU0FBTixDQUFnQkMsTUFBaEIsQ0FBdUIsTUFBdkI7QUFDSDs7QUFFRCxJQUFJWSxNQUFNLENBQUNDLFVBQVAsSUFBcUIsR0FBekIsRUFBOEI7QUFDMUJuQixFQUFBQSxLQUFLLENBQUNNLE1BQU47QUFDSDtBQ2pJRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBwbGF5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fbWFpbi13aGVlbC1idG4nKSxcbiAgICAgIHBsYXlCdG5UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fbWFpbi13aGVlbC1idG4gc3BhbicpLFxuICAgICAgd2hlZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19tYWluLXdoZWVsLXJlZWwnKSxcbiAgICAgIHRyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyeS1udW1iZXInKSxcbiAgICAgIHRyaWVzRnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX21haW4tbGVmdC10cnknKSxcbiAgICAgIG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19vdmVybGF5JyksXG4gICAgICBwb3B1cEZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fZmlyc3RXaW4nKSxcbiAgICAgIHBvcHVwRmlyc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19maXJzdFdpbi1idG4nKSxcbiAgICAgIHBvcHVwU2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fc2Vjb25kV2luJyksXG4gICAgICBwb3B1cFNlY29uZFJ1bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbV9fc2Vjb25kV2luLXJ1bGVzJyksXG4gICAgICBydWxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX3J1bGVzJyksXG4gICAgICBmb290ZXJSdWxlc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYW1fX2Zvb3Rlci1ydWxlcycpLFxuICAgICAgbW9iUnVsZXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19pbmZvTW9iLXR4dC1tb3JlJyksXG4gICAgICBvdmVyZmxvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICAgIHBvcHVwQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19ydWxlcy1jbG9zZScpLFxuICAgICAgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2FtX19tYWluLXZpZGVvJyksXG4gICAgICB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhbScpLFxuICAgICAgdG90YWxUcmllc0NvdW50ZXIgPSAyXG5cbmxldCB0cmllc0NvdW50ZXIgPSAwXG5cbmZvb3RlclJ1bGVzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS1vdmVybGF5JylcbiAgICBydWxlcy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbn0pXG5cbm1vYlJ1bGVzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3BhY2l0eS1vdmVybGF5JylcbiAgICBydWxlcy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICBvdmVyZmxvdy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG59KVxuXG5wb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1vdmVybGF5JylcbiAgICBydWxlcy5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICBvdmVyZmxvdy5zdHlsZS5vdmVyZmxvdyA9ICd1bnNldCdcbn0pXG5cbnBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKHRyaWVzQ291bnRlciA9PT0gMCkge1xuICAgICAgICBydW5GaXJzdFJvdGF0aW9uKClcbiAgICB9IGVsc2Uge1xuICAgICAgICBydW5TZWNvbmRSb3RhdGlvbigpXG4gICAgfVxufSlcblxuZnVuY3Rpb24gdXBkVHJpZXNDb3VudGVyKCkge1xuICAgIGNvbnN0IGNudCA9IHRvdGFsVHJpZXNDb3VudGVyIC0gdHJpZXNDb3VudGVyXG4gICAgaWYgKGNudCA9PT0gMikge1xuICAgICAgICB0cmllcy5pbm5lclRleHQgPSBcIjIg0YHQv9GA0L7QsdC4XCJcbiAgICB9IGVsc2UgaWYgKGNudCA9PT0gMSkge1xuICAgICAgICB0cmllcy5pbm5lclRleHQgPSBcIjEg0YHQv9GA0L7QsdCwXCJcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cmllcy5pbm5lclRleHQgPSBcIjAg0YHQv9GA0L7QsVwiXG4gICAgfVxufVxuXG5mdW5jdGlvbiBydW5GaXJzdFJvdGF0aW9uKCkge1xuICAgIHdoZWVsLmNsYXNzTGlzdC5hZGQoJ3JlZWwtcm90YXRpb24tZmlyc3QnKVxuICAgIHBsYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHVsc2UtYnRuJylcbiAgICBwbGF5QnRuVGV4dC5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICBwbGF5QnRuLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjcpJ1xuICAgIHBsYXlCdG4uc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnXG4gICAgd3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA1MDApIHtcbiAgICAgICAgICAgIHRyaWVzRnVsbC5zdHlsZS5vcGFjaXR5ID0gJzAnXG4gICAgICAgIH1cbiAgICB9LCA3MDApXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvQWZ0ZXJGaXJzdFJvdGF0aW9uKClcbiAgICB9LCA2MDAwKVxuICAgIHRyaWVzQ291bnRlcisrXG4gICAgdXBkVHJpZXNDb3VudGVyKClcbn1cblxuZnVuY3Rpb24gZG9BZnRlckZpcnN0Um90YXRpb24oKSB7XG4gICAgd2hlZWwuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSg5OTJkZWcpJ1xuICAgIHdoZWVsLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZWwtcm90YXRpb24tZmlyc3QnKVxuICAgIGRpc3BsYXlQb3B1cChwb3B1cEZpcnN0KVxuICAgIHdyYXBwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJ1xuICAgIG92ZXJmbG93LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcGxheUJ0bi5jbGFzc0xpc3QuYWRkKCdwdWxzZS1idG4nKVxuICAgICAgICBwbGF5QnRuVGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICAgICAgcGxheUJ0bi5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknXG4gICAgICAgIHBsYXlCdG4uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInXG4gICAgfSwgMTIwMClcbn1cblxuZnVuY3Rpb24gcnVuU2Vjb25kUm90YXRpb24oKSB7XG4gICAgd2hlZWwuY2xhc3NMaXN0LmFkZCgncmVlbC1yb3RhdGlvbi1zZWNvbmQnKVxuICAgIHBsYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHVsc2UtYnRuJylcbiAgICBwbGF5QnRuVGV4dC5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICBwbGF5QnRuLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjcpJ1xuICAgIHBsYXlCdG4uc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnXG4gICAgb3ZlcmZsb3cuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgIHdyYXBwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb0FmdGVyU2Vjb25kUm90YXRpb24oKVxuICAgIH0sIDYwMDApXG4gICAgdHJpZXNDb3VudGVyKytcbiAgICB1cGRUcmllc0NvdW50ZXIoKVxufVxuXG5mdW5jdGlvbiBkb0FmdGVyU2Vjb25kUm90YXRpb24oKSB7XG4gICAgZGlzcGxheVBvcHVwKHBvcHVwU2Vjb25kKVxuICAgIHdyYXBwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJ1xuICAgIHBvcHVwU2Vjb25kUnVsZXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHBvcHVwU2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgICAgICBydWxlcy5jbGFzc0xpc3QuYWRkKCdwb3B1cC13aW4nKVxuICAgICAgICBydWxlcy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICB9KVxufVxuXG5wb3B1cEZpcnN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1vdmVybGF5JylcbiAgICBwb3B1cEZpcnN0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIG92ZXJmbG93LnN0eWxlLm92ZXJmbG93ID0gJ3Vuc2V0J1xufSlcblxuZnVuY3Rpb24gZGlzcGxheVBvcHVwKHBvcHVwKSB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LW92ZXJsYXknKVxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxufVxuXG5pZiAod2luZG93LmlubmVyV2lkdGggPD0gNzY4KSB7XG4gICAgdmlkZW8ucmVtb3ZlKClcbn0iLCIiXX0=
